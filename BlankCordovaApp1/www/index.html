<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" type="text/css" href="slick/slick.css">
    <link rel="stylesheet" type="text/css" href="slick/slick-theme.css">
    <script src="scripts/jquery-1.11.3.min.js"></script>
    <script src="scripts/jquery.mobile-1.4.5.min.js"></script>
    <script src="slick/slick.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpOXj-mG3Zq0d69SdWtJ_VjVDlrGAZMvQ"></script>
    <script src="scripts/jquery.ui.map.min.js"></script>

    <style type="text/css">
        .slider {
            width: 90%;
            margin: 2px auto;
        }

        .slick-slide {
            margin: 0px 5px;
        }

            .slick-slide img {
                width: 100%;
            }

        .slick-prev:before,
        .slick-next:before {
            color: black;
        }
    </style>

</head>
<body>

  
   
    <!-- Start of message page -->
    
    <!-- End of message page -->

    <!-- Start of order page -->
    
    <!-- End of order page -->

    <!-- Start of coffee page -->
  
    <!-- End of coffee page -->

    <!-- Start of cake page -->
  
    <!-- End cake page -->

    <!-- Start of bread page -->
    
    <!-- End of bread page -->

    <!-- Start of shoppingcar page -->
  
    <!-- End of shoppingcar page -->

    <!-- Start of offer page -->
    
    <!-- End of offer page -->

    <!-- Start of stores page -->
    
    <!-- End of store page -->

    <!-- Start of accordingcounty page -->
<<<<<<< HEAD
    
=======
    <div data-role="page" id="accordingcounty">
        <div data-role="header" data-position="fixed">
            <h1>門市</h1>
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all ui-btn-active ui-state-persist" data-transition="none" href="#accordingcounty">依縣市</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all " data-transition="none" href="#aroundstore">最近門市</a>
                    </li>
                </ul>
            </div>
        </div>
        <div data-role="content">
            <form id="form1" >
                <label>請選擇縣市</label>
                <select id="list">
                    <option></option>
                    <option>台中市</option>
                    <option>台北市</option>
                    <option>台南市</option>
                </select>
                <div id="map_canvas" style="width:100%; height:100%"></div>
            </form>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-home ui-btn-icon-top " href="#main">首頁</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-bullets ui-btn-icon-top" href="#order">點餐</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-heart ui-btn-icon-top" href="#offer">優惠</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-location ui-btn-icon-top ui-btn-active ui-state-persist" href="#stores">門市</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
>>>>>>> master
    <!-- End of accordingcounty page -->

    <!-- Start of aroundstore page -->
    
    <!-- End of aroundstore page -->




    <!-- Start of login page -->
   
    <!-- End login page -->

    <!-- Start of registered page -->
<<<<<<< HEAD
    
=======
    <div data-role="page" id="registered">
        <div data-role="header" data-position="fixed">
            <a data-rel="back" data-role="button" data-icon="arrow-l">上一頁</a>
            <h1>會員註冊</h1>
        </div>
        <div class="ui-content">
            <form method="post" action="#">
                <div class="ui-field-contain">
                    <label for="name">姓名：</label><input type="text" id="regName">
                </div>
                <div class="ui-field-contain">
                    <label for="email">信箱：</label><input type="email" id="regMmail">
                </div>
                <div class="ui-field-contain">
                    <label for="pwd">密碼：</label><input type="password" id="regPwd">
                </div>
                <div class="ui-field-contain">
                    性別：
                    <label for="regMale"><input id="regMale" type="radio" name="regsex" checked />男</label>
                    <label for="regFemale"><input id="regFemale" type="radio" name="regsex" />女</label>
                </div>
                <div class="ui-field-contain">
                    <label for="date">生日：</label><input type="date" id="regDate">
                </div>
                <div>
                    <a href="#main" data-role="button" data-inline="true" id="btnReg">確認</a>
                </div>
            </form>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-home ui-btn-icon-top" href="#main">首頁</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-bullets ui-btn-icon-top" href="#order">點餐</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-heart ui-btn-icon-top" href="#offer">優惠</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-location ui-btn-icon-top" href="#stores">門市</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
>>>>>>> master
    <!-- End of registered page -->


    <!-- Start of my page -->
<<<<<<< HEAD
   
    <!-- End of my page -->

    <!-- Start of edit page -->
    
    <!-- End of edit page -->

    <!-- Start of editpwd page -->
    
    <!-- End of deposit page -->

    <script type="text/javascript">
       
=======
    <div data-role="page" id="my">
        <div data-role="header" data-position="fixed">
            <a data-rel="back" data-role="button" data-icon="arrow-l">上一頁</a>
            <h1>會員資料</h1>
            <a href="#deposit" data-role="button" data-icon="star" data-transition="slide">儲值</a>
        </div>
        <div data-role="content">
            <div>
                姓名：<input type="text" id="myname" readonly="readonly">
            </div>
            <div>
                信箱：<input type="email" id="myemail" readonly="readonly">
            </div>
            <div>
                性別：<input type="text" id="mysex" readonly="readonly">
            </div>
            <div>
                生日：<input type="date" id="mydate" readonly="readonly" >
            </div>
            <div>
                餘額：<input type="text" id="mybalance" readonly="readonly">
            </div>

            <div>
                <a href="#edit" data-role="button" data-inline="true" id="btnEdit">修改資料</a>
                <a href="#changepwd" data-role="button" data-inline="true">修改密碼</a>
                <a href="#main" data-role="button" data-inline="true" id="btnLogout">登出</a>
            </div>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-home ui-btn-icon-top" href="#main">首頁</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-bullets ui-btn-icon-top" href="#order">點餐</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-heart ui-btn-icon-top" href="#offer">優惠</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-location ui-btn-icon-top" href="#stores">門市</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- End of my page -->

    <!-- Start of edit page -->
    <div data-role="page" id="edit">
        <div data-role="header"  data-position="fixed">
            <a data-role="button" data-rel="back" data-icon="arrow-l">上一頁</a>
            <h1>會員資料修改</h1>
            <a href="#main" data-role="button" data-icon="home">首頁</a>
        </div>
        <div data-role="content">
            <div>
                <label for="editName">姓名：</label><input type="text"  id="editname">
            </div>

            <div>
                性別：
                <label for="editmale"><input id="editmale" type="radio" name="sex" value="男"/>男</label>
                <label for="editfemale"><input id="editfemale" type="radio" name="sex" value="女" />女</label>
            </div>
            <div>
                <label for="date">生日：</label><input type="date" id="editdate" name="editdate">
            </div>
            <div>
                <label for="pwd">請輸入密碼：</label><input type="password" id="editpwd">
            </div>
            <div>
                <a href="#main" data-role="button" data-inline="true" id="btnEditOK">確定</a>
            </div>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-home ui-btn-icon-top" href="#main">首頁</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-bullets ui-btn-icon-top" href="#order">點餐</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-heart ui-btn-icon-top" href="#offer">優惠</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-location ui-btn-icon-top" href="#stores">門市</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- End of edit page -->
        
    <!-- Start of editPwd page -->
    <div data-role="page" id="changepwd">
        <div data-role="header" data-position="fixed">
            <a data-role="button" data-rel="back" data-icon="arrow-l">上一頁</a>
            <h1>密碼修改</h1>
            <a href="#main" data-role="button" data-icon="home">首頁</a>
        </div>
        <div>
            <label for="editPwdold">舊密碼:<input type="password" id="editPwdold" /></label>
        </div>
        <div>
            <label for="">新密碼:<input type="password" id="editPwdnew1" /></label>
        </div>
        <div>
            <label for="editPwdnew2">確認新密碼:<input type="password" id="editPwdnew2" /></label>
        </div>
        <div>
            <label><a href="#main" data-role="button" data-inline="true" id="editPwdOK">確認</a></label>
        </div>

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-home ui-btn-icon-top" href="#main">首頁</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-bullets ui-btn-icon-top" href="#order">點餐</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-heart ui-btn-icon-top" href="#offer">優惠</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-location ui-btn-icon-top" href="#stores">門市</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- End of editPwd page -->

    <!-- Start of deposit page -->
    <div data-role="page" id="deposit">
        <div data-role="header" data-position="fixed">
            <a data-rel="back" data-role="button" data-icon="arrow-l">上一頁</a>
            <h1>儲值</h1>
        </div>
        <div data-role="content">

        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-home ui-btn-icon-top" href="#main">首頁</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-bullets ui-btn-icon-top" href="#order">點餐</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-heart ui-btn-icon-top" href="#offer">優惠</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-location ui-btn-icon-top" href="#stores">門市</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- End of deposit page -->

    <script type="text/javascript">
        $(document).on('ready', function () {
                //start of slick
                $(".regular").slick({
                    dots: true,
                    infinite: true,
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    autoplay: true
                });
                $(".center").slick({
                    dots: true,
                    infinite: true,
                    centerMode: true,
                    slidesToShow: 3,
                    slidesToScroll: 3
                });
                $(".variable").slick({
                    dots: true,
                    infinite: true,
                    variableWidth: true
                });

                //end of slick

                //是否登入判斷
                var logined = window.localStorage;

                if (logined.getItem("logined") == null)
                    $("#member").text("登入")

                else {
                    $("#member").text("會員")
                }

                $("#member").click(function () {

                    if (logined.getItem("logined") == null)
                        location.href = '#login';
                    else
                        location.href = "#my";
                    $('#myname').val(logined['name']);
                    $('#mysex').val(logined['sex']);
                    $("#mydate").val(logined['date']);
                    $("#myemail").val(logined['email']);
                    $('#mybalance').val(logined['balance']);



                });
                //登出
                $("#btnLogout").click(function () {
                    logined.clear();
                    $("#member").text("登入")
                });
                //登入抓取資料
                $("#btnlogin").click(function () {

                    var session = {};
                    var email = $('#logemail').val();
                    var pwd = $('#logpwd').val();
                    var a = {
                        "mode": "login",
                        "login": [
                                    {
                                        "email": email,
                                        "pwd": pwd
                                    }
                        ]
                    }
                    $.ajax({
                        url: "http://localhost/Test/mobile.ashx",
                        type: "POST",
                        dataType: "json",
                        contentType: 'application/json; charset=utf-8',
                        data: JSON.stringify(a),
                        success: function (paa) {
                            if (paa.message == null) {
                                session = paa;
                                session.islogined = true;
                                logined.setItem("name", session.name);
                                logined.setItem('sex', session.sex);
                                logined.setItem('balance', session.balance);
                                logined.setItem('date', session.date);
                                logined.setItem('email',session.email);
                                logined .setItem("logined", 'true');
                                $("#member").text("會員");
                                location.href = '#main';
                            }

                            else
                            {
                                alert(paa.message);
                                $("#logEmail").val("");
                                $("#logEwd").val('');
                            }
                        },
                        error: function () { alert('失敗') }
                    });


                });

                $("#btnEditOK").click(function () {
                    var pwd = $("#editpwd").val();
                    var name = $("#editname").val();
                    var date = $('input[name=editdate]').val();
                    var sex = $("input[name='sex':checked]").val();
                    alert($("input[name='sex']").val())
                    var email = logined['email'];
                    var a = {
                        "mode": "edit",
                        "login": [
                                       {
                                        "pwd": pwd,
                                        "sex": sex,
                                        "date": date,
                                        "name": name,
                                        "email":email
                                       }
                                    
                                ]

                    }

                    $.ajax({
                        url: "http://localhost/Test/mobile.ashx",
                        type: "POST",
                        dataType: "json",
                        contentType: 'application/json; charset=utf-8',
                        data: JSON.stringify(a),
                        success: function (data) {
                            if (data.message == null)
                            {
                                alert('成功')
                                logined.setItem('name', data.name);
                                logined.setItem('sex', data.sex);
                                logined.setItem('date', data.date);
                            }
                            else
                            {
                                alert("密碼錯誤");
                            }


                        },
                        error: function(){alert('失敗')}
                    })
                });

                $("#btnEdit").click(function () {

                    console.dir(logined);

                    $("#editname").val(logined['name']);
                    $('#editdate').val(logined['date']);
                    if(logined['sex']=='男')
                    {
                        
                        $("input[id='editfemale']").attr("checked", "");;
                        $("input[name='sex'][value='男']").attr("checked", "checked");
                    }
                    else
                    {
                        alert('女')
                        $("input[id='editmale']").attr("checked", "");
                        $("input[name='sex'][value='女']").attr("checked", "checked");
                        
                    }
                });
>>>>>>> master

            

            
           




    </script>

</body>
</html>