<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" type="text/css" href="slick/slick.css">
    <link rel="stylesheet" type="text/css" href="slick/slick-theme.css">
    <script src="scripts/jquery-1.11.3.min.js"></script>

    <script src="scripts/jquery.mobile-1.4.5.min.js"></script>
    <script src="slick/slick.min.js"></script>
    <title></title>
</head>
<body>
    <script>
        //登入抓取資料
       
        $(document).on('ready', function () {
            var logined = window.localStorage;
            if (logined['logined'] == 'true')
            {
                location.href = "#My";
            }
                

            $("#btnLogin").click(function () {
                var session = {};
                var email = $('#logEmail').val();
                var pwd = $('#logPwd').val();
                var a = {
                    "mode": "login",
                    "login": [
                                {
                                    "email": email,
                                    "pwd": pwd
                                }
                    ]
                }
                $.ajax({
                    url: "http://localhost/TEST/mobile.ashx",
                    type: "POST",
                    dataType: "json",
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(a),
                    success: function (paa) {
                        if (paa.message == null) {
                            session = paa;
                            session.islogined = true;
                            logined.setItem("name", session.name);
                            logined.setItem('sex', session.sex);
                            logined.setItem('balance', session.balance);
                            logined.setItem('date', session.date);
                            logined.setItem('email', session.email);
                            logined.setItem("logined", 'true');
                            location.href = 'index.html';
                        }
                        else {
                            alert(paa.message);
                            $("#logEmail").val("");
                            $("#logPwd").val('');
                        }
                    },
                    error: function () { alert('失敗') }
                });
            });

            // My page
            var logined = window.localStorage;
            $('#myName').val(logined['name']);
            $('#mySex').val(logined['sex']);
            $("#myDate").val(logined['date']);
            $("#myEmail").val(logined['email']);
            $('#myBalance').val(logined['balance']);

            //登出
            $("#btnLogout").click(function () {
                logined.clear();
                $("#member").text("登入")
            });
        });
                    
     
        

    </script>
    <!--star Login page-->
    <div data-role="page" id="Login">
        <div data-role="header">
            <a data-rel="back" data-role="button" data-icon="arrow-l">上一頁</a>
            <h1>會員登入</h1>
            <a href="#Registered" data-role="button" data-icon="plus" data-transition="slide">註冊</a>
        </div>
        <div data-role="content">
            <form method="post" action="#">
                <div>
                    <label for="email">信箱：</label><input type="email" id="logEmail" value="gg@inin.der">
                </div>
                <div>
                    <label for="pwd">密碼：</label><input type="password" id="logPwd" value="c8763">
                </div>
                <div>
                    <a  data-role="button" data-inline="true" id="btnLogin">登入</a>

                </div>
            </form>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-home ui-btn-icon-top " href="index.html">首頁</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-bullets ui-btn-icon-top" href="Order.html">點餐</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-heart ui-btn-icon-top" href="Offer.html">優惠</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-location ui-btn-icon-top" href="Stores.html">門市</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!--star My page-->
    <div data-role="page" id="My">
        <div data-role="header" data-position="fixed">
            <a data-rel="back" data-role="button" data-icon="arrow-l">上一頁</a>
            <h1>會員資料</h1>
            <a href="Deposit.html" data-role="button" data-icon="star" data-transition="slide">儲值</a>
        </div>
        <div data-role="content">
            <div>
                姓名：<input type="text" id="myName" readonly="readonly">
            </div>
            <div>
                信箱：<input type="email" id="myEmail" readonly="readonly">
            </div>
            <div>
                性別：<input type="text" id="mySex" readonly="readonly">
            </div>
            <div>
                生日：<input type="date" id="myDate" readonly="readonly">
            </div>
            <div>
                餘額：<input type="text" id="myBalance" readonly="readonly">
            </div>

            <div>
                <a href="Edit.html" data-role="button" data-inline="true">修改資料</a>
                <a href="index.html" data-role="button" data-inline="true" id="btnLogout">登出</a>
            </div>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-home ui-btn-icon-top" href="index.html">首頁</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-bullets ui-btn-icon-top" href="Order.html">點餐</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-heart ui-btn-icon-top" href="Offer.html">優惠</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-location ui-btn-icon-top" href="Stores.html">門市</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!--star Registered page-->
    <div data-role="page" id="Registered">
        <div data-role="header" data-position="fixed">
            <a data-rel="back" data-role="button" data-icon="arrow-l">上一頁</a>
            <h1>會員註冊</h1>
        </div>
        <div class="ui-content">
            <form method="post" action="#">
                <div class="ui-field-contain">
                    <label for="name">姓名：</label><input type="text" id="regName">
                </div>
                <div class="ui-field-contain">
                    <label for="email">信箱：</label><input type="email" id="regMmail">
                </div>
                <div class="ui-field-contain">
                    <label for="pwd">密碼：</label><input type="password" id="regPwd">
                </div>
                <div class="ui-field-contain">
                    性別：
                    <label for="male"><input id="regMale" type="radio" name="sex" checked />男</label>
                    <label for="female"><input id="regFemale" type="radio" name="sex" />女</label>
                </div>
                <div class="ui-field-contain">
                    <label for="date">生日：</label><input type="date" id="regDate">
                </div>
                <div>
                    <a href="#" data-role="button" data-inline="true" id="btnReg">確認</a>
                </div>
            </form>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-home ui-btn-icon-top" href="index.html">首頁</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-bullets ui-btn-icon-top" href="Order.html">點餐</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-heart ui-btn-icon-top" href="Offer.html">優惠</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-location ui-btn-icon-top" href="Stores.html">門市</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!--star Deposit page-->
    <div data-role="page" id="Deposit">
        <div data-role="header" data-position="fixed">
            <a data-rel="back" data-role="button" data-icon="arrow-l">上一頁</a>
            <h1>儲值</h1>
        </div>
        <div data-role="content">

        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-mini="true">
                <ul>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-home ui-btn-icon-top" href="index.html">首頁</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-bullets ui-btn-icon-top" href="Order.html">點餐</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-heart ui-btn-icon-top" href="Offer.html">優惠</a>
                    </li>
                    <li>
                        <a class="ui-btn ui-corner-all  ui-icon-location ui-btn-icon-top" href="Stores.html">門市</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>